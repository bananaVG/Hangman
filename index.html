<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hangman Game</title>
    <link rel="icon" type="image/png" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABz51ERAAAAAXNSR0IArs4c6QAAAyFJREFUWAdj/P//PwMhAwMDw4jC/0oG/v7+ZgYGBgYGJkYGBoY/f/5kYGBgYGBkYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBo+e+e++b+f58vO++z/V4Q==">
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            font-family: "Inter", sans-serif;
            background-color: #f0f4f8; /* Light blue-gray background */
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh; /* Full viewport height */
            margin: 0;
            padding: 20px; /* Padding around the game container */
            box-sizing: border-box; /* Include padding in element's total width and height */
        }
        .game-container {
            background-color: #ffffff; /* White background for the game box */
            border-radius: 1.5rem; /* More rounded corners */
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1); /* Soft shadow */
            padding: 2.5rem; /* Increased padding */
            text-align: center;
            max-width: 500px; /* Max width for better readability on large screens */
            width: 100%; /* Full width on smaller screens */
            display: flex;
            flex-direction: column;
            gap: 1.5rem; /* Space between sections */
        }
        .hangman-stage {
            font-family: 'monospace', 'Courier New', Courier; /* Monospace for ASCII art */
            white-space: pre; /* Preserve whitespace for ASCII art */
            font-size: 0.9rem; /* Slightly smaller font for ASCII art */
            line-height: 1; /* Tight line height for ASCII art */
            color: #4a5568; /* Dark gray for the ASCII art */
            background-color: #e2e8f0; /* Light background for the stage */
            padding: 1rem;
            border-radius: 0.75rem;
            min-height: 150px; /* Ensure consistent height */
            display: flex;
            justify-content: center;
            align-items: center;
        }
        .word-display {
            font-size: 2.5rem; /* Larger font for the word */
            font-weight: bold;
            letter-spacing: 0.5rem; /* Space out letters */
            color: #2d3748; /* Darker gray for the word */
            margin-bottom: 1.5rem;
        }
        .guessed-letters {
            font-size: 1rem;
            color: #6b7280;
            min-height: 20px;
            margin-top: -1rem; /* Adjust spacing */
        }
        .timer-info { /* Renamed from timer-display */
            font-size: 1.1rem;
            font-weight: bold;
            color: #6b7280; /* Neutral color for info */
            margin-bottom: 1rem;
        }
        .input-group {
            display: flex;
            gap: 0.75rem; /* Space between input and button */
            justify-content: center;
            margin-top: 1.5rem;
        }
        .guess-input {
            padding: 0.75rem 1rem;
            border: 2px solid #cbd5e0; /* Light border */
            border-radius: 0.75rem; /* Rounded input */
            font-size: 1.1rem;
            width: 100px; /* Fixed width for the input */
            text-align: center;
            outline: none;
            transition: border-color 0.2s ease-in-out;
        }
        .guess-input:focus {
            border-color: #4299e1; /* Blue border on focus */
        }
        .btn {
            padding: 0.75rem 1.5rem;
            border-radius: 0.75rem;
            font-weight: 600;
            cursor: pointer;
            transition: background-color 0.2s ease-in-out, transform 0.1s ease-in-out;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1); /* Button shadow */
        }
        .btn-primary {
            background-color: #4299e1; /* Blue primary button */
            color: white;
            border: none;
        }
        .btn-primary:hover:not(:disabled) {
            background-color: #3182ce; /* Darker blue on hover */
            transform: translateY(-1px); /* Slight lift */
        }
        .btn-primary:active:not(:disabled) {
            background-color: #2b6cb0; /* Even darker on active */
            transform: translateY(0);
        }
        .btn-secondary {
            background-color: #a0aec0; /* Gray secondary button */
            color: white;
            border: none;
        }
        .btn-secondary:hover:not(:disabled) {
            background-color: #718096; /* Darker gray on hover */
            transform: translateY(-1px);
        }
        .btn-secondary:active:not(:disabled) {
            background-color: #5b6e82;
            transform: translateY(0);
        }
        .btn-hint { /* New style for hint button */
            background-color: #f6ad55; /* Orange for hint */
            color: white;
            border: none;
        }
        .btn-hint:hover:not(:disabled) {
            background-color: #ed8936; /* Darker orange on hover */
            transform: translateY(-1px);
        }
        .btn-hint:active:not(:disabled) {
            background-color: #dd6b20;
            transform: translateY(0);
        }
        .btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            box-shadow: none;
        }
        .button-row { /* To group hint and new game buttons */
            display: flex;
            justify-content: center;
            gap: 1rem;
            margin-top: 1rem;
        }
    </style>
</head>
<body>
    <div class="game-container">
        <h1 class="text-4xl font-extrabold text-gray-800 mb-4">Hangman</h1>

        <pre id="hangman-stage" class="hangman-stage">
 +---+
 |   |
     |
     |
     |
     |
=========
        </pre>

        <div id="timer-info" class="timer-info">You have 60 seconds to solve the puzzle!</div>

        <div id="word-display" class="word-display">_ _ _ _ _</div>

        <div id="guessed-letters" class="guessed-letters">Guessed: </div>

        <p id="message" class="message text-red-500"></p>

        <div class="input-group">
            <input type="text" id="guess-input" maxlength="1" class="guess-input" placeholder="A-Z">
            <button id="guess-button" class="btn btn-primary">Guess</button>
        </div>

        <div class="button-row">
            <button id="hint-button" class="btn btn-hint">Get Hint ( -1 Life)</button>
            <button id="new-game-button" class="btn btn-secondary">New Game</button>
        </div>
    </div>

    <script>
        // Game variables
        const stages = [
            `
 +---+
 |   |
 O   |
/|\\  |
/ \\  |
     |
=========
`,
            `
 +---+
 |   |
 O   |
/|\\  |
/    |
     |
=========
`,
            `
 +---+
 |   |
 O   |
/|   |
     |
     |
=========
`,
            `
 +---+
 |   |
 O   |
 |   |
     |
     |
=========
`,
            `
 +---+
 |   |
 O   |
     |
     |
     |
=========
`,
            `
 +---+
 |   |
     |
     |
     |
     |
=========
`
        ];

        const word_list = [
            "apple", "baker", "chair", "dream", "earth", "fruit", "grape", "house",
            "igloo", "jolly", "kite", "lemon", "mouse", "night", "ocean", "plant",
            "queen", "river", "smile", "table", "union", "value", "water", "xenon",
            "yacht", "zebra", "angel", "beach", "cloud", "dance", "eagle", "flame",
            "ghost", "happy", "inked", "juice", "knife", "light", "music", "north",
            "olive", "peach", "quiet", "robot", "snake", "train", "unity", "vocal",
            "wagon", "x-ray", "young", "zesty", "awake", "brave", "crane", "doubt",
            "early", "fancy", "giant", "hotel", "ivory", "jolly", "koala", "loyal",
            "melon", "novel", "opera", "proud", "quest", "ready", "sunny", "tiger",
            "under", "vivid", "worry", "xerox", "yummy", "crazy", "beard", "cabin",
            "daisy", "empty", "feast", "grass", "hello", "ideas", "jumps", "kicks",
            "lucky", "magic", "never", "owing", "party", "quick", "rusty", "sweet",
            "today", "urban", "vowel", "write", "yells", "zones", "alarm", "brick",
            "calm", "dwarf", "empty", "faint", "glove", "hairy", "irony", "jumps",
            "kneel", "latch", "minus", "nerve", "oat", "paint", "quill", "roast",
            "shade", "twist", "usher", "vest", "whisk", "yarn", "adorn", "bless",
            "climb", "ditch", "enjoy", "flock", "greet", "hatch", "inner", "joust",
            "knead", "leash", "mirth", "notch", "outer", "pouch", "quart", "round",
            "sniff", "towel", "usual", "vague", "witty", "yawn", "alert", "bloom",
            "crisp", "drill", "eager", "float", "grace", "haste", "itchy", "joint",
            "knock", "lunar", "medal", "niece", "onion", "prism", "quilt", "rebel",
            "stump", "tasty", "ultra", "vixen", "widen", "youth", "azure", "bingo",
            "cider", "dizzy", "elbow", "fable", "gavel", "hilly", "index", "jumbo",
            "kiosk", "liven", "motto", "niece", "organ", "pilot", "quack", "reach",
            "silly", "trunk", "usher", "vivid", "wedge", "yacht", "zest"
        ];

        // A list of hints corresponding to some words in word_list.
        // The index here should match the word_list index for the corresponding word.
        const hints_list = [
            "A common fruit", // apple
            "Works in a bakery", // baker
            "Something to sit on", // chair
            "What you have when you sleep", // dream
            "Our planet", // earth
            "Often sweet, grows on trees", // fruit
            "Small, round fruit in bunches", // grape
            "Where you live", // house
            "An arctic shelter", // igloo
            "Happy and cheerful", // jolly
            "Flies in the wind", // kite
            "A yellow, sour citrus fruit", // lemon
            "A small rodent", // mouse
            "Opposite of day", // night
            "A very large body of water", // ocean
            "Grows in a garden", // plant
            "A female monarch", // queen
            "A flowing body of water", // river
            "A facial expression of happiness", // smile
            "Used for eating or working", // table
            "Coming together as one", // union
            "The worth of something", // value
            "You drink it", // water
            "A noble gas", // xenon
            "A type of boat", // yacht
            "A striped animal", // zebra
            "A divine messenger", // angel
            "Sandy shore by the sea", // beach
            "White masses in the sky", // cloud
            "Move rhythmically to music", // dance
            "A large bird of prey", // eagle
            "Hot, burning gas", // flame
            "A spirit of a dead person", // ghost
            "Feeling or showing pleasure", // happy
            "Having writing or marks on it", // inked
            "A sweet drink made from fruit", // juice
            "A sharp cutting tool", // knife
            "Illumination; not heavy", // light
            "Organized sound", // music
            "Direction opposite of south", // north
            "A small oval fruit with a hard stone", // olive
            "A fuzzy, sweet fruit", // peach
            "Making little or no noise", // quiet
            "A machine designed to do tasks", // robot
            "A legless reptile", // snake
            "A form of transport on rails", // train
            "The state of being one or united", // unity
            "Related to the voice", // vocal
            "A four-wheeled vehicle for transport", // wagon
            "A type of radiation", // x-ray
            "Not old", // young
            "Having a strong, pleasant flavor", // zesty
            "Not asleep", // awake
            "Feeling or showing courage", // brave
            "A large bird with a long neck and legs", // crane
            "A feeling of uncertainty or lack of conviction", // doubt
            "Happening or done before the usual or expected time", // early
            "Elaborate or highly decorated", // fancy
            "An imaginary being of human form but superhuman size", // giant
            "A building offering lodging to travelers", // hotel
            "A hard, white material from elephant tusks", // ivory
            "Happy and cheerful", // jolly (duplicate hint, but acceptable if word exists twice)
            "An Australian marsupial", // koala
            "Giving or showing firm and constant support", // loyal
            "A large, sweet fruit with green or yellow skin", // melon
            "A long written or published story", // novel
            "A dramatic work in one or more acts", // opera
            "Feeling deep pleasure or satisfaction", // proud
            "A search for something", // quest
            "In a suitable state for an activity", // ready
            "Bright with sunlight", // sunny
            "A large carnivorous feline", // tiger
            "Below or beneath", // under
            "Producing powerful feelings or strong, clear images", // vivid
            "Feel anxious or uneasy", // worry
            "A copying process or machine", // xerox
            "Delicious", // yummy
            "Insane or wild", // crazy
            "Hair growing on a man's chin and cheeks", // beard
            "A small, simple house", // cabin
            "A flowering plant with a composite flower head", // daisy
            "Containing nothing; not occupied", // empty
            "A large meal, typically a celebratory one", // feast
            "Green, leafy plants forming a carpet", // grass
            "A greeting", // hello
            "Thoughts or suggestions for a possible course of action", // ideas
            "Pushes oneself off the ground into the air", // jumps
            "Strikes with the foot", // kicks
            "Lucky: Having good fortune", // lucky
            "The power of apparently influencing events by using mysterious or supernatural forces", // magic
            "At no time in the past or future", // never
            "Payment due", // owing
            "A social gathering for pleasure or amusement", // party
            "Quick: Done or occurring speedily", // quick
            "Affected by rust; old and worn", // rusty
            "Having a taste of sugar", // sweet
            "This current day", // today
            "In, relating to, or characteristic of a city or town", // urban
            "A speech sound produced by open articulation of the vocal tract", // vowel
            "Form letters or words on a surface", // write
            "Utters a loud, sharp cry", // yells
            "Zones: Areas or regions", // zones
            "A warning sound or device", // alarm
            "A block of hard material", // brick
            "Not agitated or disturbed", // calm
            "A person of unusually small stature", // dwarf
            "Having nothing inside", // empty (duplicate)
            "Lose strength and energy; grow weak", // faint
            "A covering for the hand", // glove
            "Covered with hair", // hairy
            "The expression of one's meaning by using language that normally signifies the opposite", // irony
            "Pushes oneself off the ground into the air", // jumps (duplicate)
            "Go down on one's knee(s)", // kneel
            "A device for securing a door or gate", // latch
            "Less than zero", // minus
            "Courage or daring", // nerve
            "A cereal plant cultivated for its edible grain", // oat
            "A colored substance which is spread over a surface", // paint
            "A feather, especially a large one from a bird's wing", // quill
            "Cook (food, especially meat) by dry heat in an oven or over a fire", // roast
            "A dark area or shape produced by a body coming between rays of light and a surface", // shade
            "Turn into a different form or direction", // twist
            "A person who shows people to their seats, especially in a theater or at a wedding", // usher
            "A garment covering the upper body", // vest
            "Take (something) with a rapid, sweeping stroke", // whisk
            "Spun fiber used for knitting or weaving", // yarn
            "Decorate or add beauty to", // adorn
            "Confer divine favor upon", // bless
            "Go or come up an incline", // climb
            "A long, narrow excavation in the ground", // ditch
            "Take delight or pleasure in (an activity or occasion)", // enjoy
            "A group of birds or sheep", // flock
            "Address with a polite word or sign of welcome", // greet
            "Emergence from an egg", // hatch
            "Situated inside", // inner
            "Engage in a chivalrous fight or contest", // joust
            "Work (dough or clay) with the hands", // knead
            "A rope or chain for holding an animal", // leash
            "Amusement, especially as expressed in laughter", // mirth
            "An indentation or cut on an edge or surface", // notch
            "Situated on the outside", // outer
            "A small bag or other flexible container", // pouch
            "A unit of liquid capacity", // quart
            "Move in a circle around a central point", // round
            "Draw in air audibly through the nose", // sniff
            "A piece of absorbent cloth or paper", // towel
            "Habitual or customary", // usual
            "Of uncertain, indefinite, or unclear meaning", // vague
            "Showing or characterized by quick and inventive verbal humor", // witty
            "An involuntary open of the mouth", // yawn
            "Quick to notice and respond", // alert
            "Produce flowers", // bloom
            "Firm and dry, but easily broken or crumbled", // crisp
            "A tool or machine with a rotating cutting point", // drill
            "Having or showing keen interest, anticipation, or excitement", // eager
            "Rest on or move lightly on or over a surface of water", // float
            "Smoothness and elegance of movement", // grace
            "Excessive speed or urgency of movement or action", // haste
            "Having an irritating sensation on the skin", // itchy
            "A place where two or more things are joined", // joint
            "Strike (something) with a sharp blow", // knock
            "Of or relating to the moon", // lunar
            "A piece of metal with a design or inscription", // medal
            "A daughter of one's brother or sister", // niece
            "A pungent-smelling, edible bulb", // onion
            "A transparent block of glass with polished surfaces", // prism
            "A bed covering", // quilt
            "A person who rises in opposition or armed resistance", // rebel
            "The short part of a tree trunk left projecting from the ground after it has been cut down", // stump
            "Having a pleasant flavor", // tasty
            "Going beyond what is normal, typical, or expected", // ultra
            "A shrewd or ill-tempered woman", // vixen
            "Make or become wider", // widen
            "The period between childhood and adulthood", // youth
            "A light, delicate blue color", // azure
            "A game of chance in which each player has a card", // bingo
            "An alcoholic drink made from fermented apple juice", // cider
            "Having a sensation of spinning and losing one's balance", // dizzy
            "The joint between the forearm and the upper arm", // elbow
            "A short story, typically with animals as characters", // fable
            "A hammer used in a court of law", // gavel
            "Having many hills", // hilly
            "An alphabetical list of names, subjects, etc.", // index
            "Very large in size or amount", // jumbo
            "A small open-fronted hut or cubicle", // kiosk
            "Liven: Make or become more lively or cheerful", // liven
            "A short statement of a general truth or rule of conduct", // motto
            "A daughter of one's brother or sister", // niece (duplicate)
            "A part of an animal or plant body with a specific function", // organ
            "A person who operates the flying controls of an aircraft", // pilot
            "The sound made by a duck", // quack
            "Stretch out an arm in a specified direction", // reach
            "Having or showing a foolish, frivolous, or irresponsible character", // silly
            "The main woody stem of a tree", // trunk
            "A person who shows people to their seats, especially in a theater or at a wedding", // usher (duplicate)
            "Producing powerful feelings or strong, clear images", // vivid (duplicate)
            "A piece of wood, metal, or other material having one thick end and one tapered end", // wedge
            "A type of boat", // yacht (duplicate)
            "Great enthusiasm and energy", // zest (duplicate)
        ];

        let lives;
        let chosenWord;
        let displayWord;
        let guessedLetters;
        let gameOver;
        let timerTimeoutId; // To store the timeout ID for the timer
        let hintUsed; // New variable to track if hint has been used
        const initialTime = 60; // 60 seconds for the timer

        // DOM Elements
        const hangmanStageEl = document.getElementById('hangman-stage');
        const wordDisplayEl = document.getElementById('word-display');
        const guessedLettersEl = document.getElementById('guessed-letters');
        const messageEl = document.getElementById('message');
        const guessInputEl = document.getElementById('guess-input');
        const guessButtonEl = document.getElementById('guess-button');
        const newGameButtonEl = document.getElementById('new-game-button');
        const timerInfoEl = document.getElementById('timer-info'); // Changed from timer-display
        const hintButtonEl = document.getElementById('hint-button'); // New hint button element

        /**
         * Returns a hint for the chosen word if one exists in the hints_list.
         * @returns {string|null} The hint, or null if no hint is available.
         */
        function getHint() {
            const wordIndex = word_list.indexOf(chosenWord);
            if (wordIndex !== -1 && hints_list[wordIndex]) {
                return `Hint: ${hints_list[wordIndex]}`;
            }
            return null;
        }

        /**
         * Manages the countdown timer.
         * This function calls itself recursively using setTimeout for stability.
         */
        function countdown() {
            if (gameOver) {
                return; // Stop the countdown if the game is over
            }

            // Time's up, player loses
            lives = 0; // Complete the hangman
            gameOver = true;
            updateGameDisplay();
        }

        /**
         * Starts the game timer.
         */
        function startTimer() {
            // Clear any existing timer before starting a new one
            clearTimeout(timerTimeoutId);
            timerTimeoutId = setTimeout(countdown, initialTime * 1000); // Trigger countdown after initialTime seconds
        }

        /**
         * Stops the game timer.
         */
        function stopTimer() {
            clearTimeout(timerTimeoutId);
        }

        /**
         * Initializes a new game by resetting all game variables and updating the UI.
         */
        function initializeGame() {
            stopTimer(); // Clear any existing timer
            lives = 5;
            chosenWord = word_list[Math.floor(Math.random() * word_list.length)];
            displayWord = Array(chosenWord.length).fill('_');
            guessedLetters = [];
            gameOver = false;
            hintUsed = false; // Reset hint usage for new game

            // Reset UI elements
            messageEl.textContent = '';
            guessInputEl.value = '';
            guessInputEl.disabled = false;
            guessButtonEl.disabled = false;
            hintButtonEl.disabled = false; // Enable hint button for new game
            guessInputEl.focus(); // Focus on input for immediate typing

            // Set the static timer info message
            timerInfoEl.textContent = `You have ${initialTime} seconds to solve the puzzle!`;

            updateGameDisplay();
            startTimer(); // Start the timer for the new game
        }

        /**
         * Updates the game display based on the current game state.
         * This includes the hangman stage, the word display, guessed letters, and any messages.
         */
        function updateGameDisplay() {
            hangmanStageEl.textContent = stages[lives];
            wordDisplayEl.textContent = displayWord.join(' ');
            guessedLettersEl.textContent = 'Guessed: ' + (guessedLetters.length > 0 ? guessedLetters.map(l => l.toUpperCase()).join(', ') : 'None');

            if (gameOver) {
                stopTimer(); // Stop the timer when game is over
                guessInputEl.disabled = true;
                guessButtonEl.disabled = true;
                hintButtonEl.disabled = true; // Disable hint button if game is over
                if (lives === 0) {
                    messageEl.textContent = `You lose! The word was "${chosenWord.toUpperCase()}".`;
                    messageEl.classList.remove('text-green-500');
                    messageEl.classList.add('text-red-500');
                } else {
                    messageEl.textContent = 'You win!';
                    messageEl.classList.remove('text-red-500');
                    messageEl.classList.add('text-green-500');
                }
            } else {
                // Only update lives message if a hint hasn't just been used and displayed
                if (!messageEl.textContent.includes("Hint:")) { // Check if the message isn't already a hint
                     messageEl.textContent = `Lives left: ${lives}`;
                     messageEl.classList.remove('text-red-500', 'text-green-500');
                     messageEl.classList.add('text-gray-600');
                }


                // Disable hint button if already used
                if (hintUsed) {
                    hintButtonEl.disabled = true;
                } else {
                    hintButtonEl.disabled = false;
                }
            }
        }

        /**
         * Handles a user's guess.
         * @param {string} guess - The letter guessed by the user.
         */
        function handleGuess(guess) {
            if (gameOver) return; // Prevent guesses if game is over

            // Input validation
            if (!guess || guess.length !== 1 || !/^[a-z]$/.test(guess)) {
                messageEl.textContent = 'Please enter a single letter (A-Z).';
                messageEl.classList.remove('text-green-500');
                messageEl.classList.add('text-red-500');
                return;
            }

            if (guessedLetters.includes(guess)) {
                messageEl.textContent = `You've already guessed "${guess.toUpperCase()}". Try another letter.`;
                messageEl.classList.remove('text-green-500');
                messageEl.classList.add('text-red-500');
                return;
            }

            guessedLetters.push(guess); // Add guess to the list of guessed letters

            let correctGuess = false;
            for (let i = 0; i < chosenWord.length; i++) {
                if (chosenWord[i] === guess) {
                    displayWord[i] = guess;
                    correctGuess = true;
                }
            }

            if (!correctGuess) {
                lives--;
                messageEl.textContent = `"${guess.toUpperCase()}" is not in the word. Lives left: ${lives}`;
                messageEl.classList.remove('text-green-500');
                messageEl.classList.add('text-red-500');
            } else {
                messageEl.textContent = `Good guess! Lives left: ${lives}`;
                messageEl.classList.remove('text-red-500');
                messageEl.classList.add('text-green-500');
            }

            // Check for game over conditions
            if (lives === 0) {
                gameOver = true;
            } else if (!displayWord.includes('_')) {
                gameOver = true;
            }

            updateGameDisplay();
        }

        // Event Listeners
        guessButtonEl.addEventListener('click', () => {
            const guess = guessInputEl.value.toLowerCase();
            handleGuess(guess);
            guessInputEl.value = ''; // Clear input after guess
            guessInputEl.focus(); // Keep focus on input
        });

        guessInputEl.addEventListener('keypress', (event) => {
            if (event.key === 'Enter') {
                event.preventDefault(); // Prevent default form submission if any
                guessButtonEl.click(); // Simulate a click on the guess button
            }
        });

        hintButtonEl.addEventListener('click', () => {
            if (gameOver || hintUsed) { // Removed 'lives <= 1' condition
                return; // Prevent using hint if game is over or already used
            }

            lives--; // Deduct one life for using a hint
            hintUsed = true; // Mark hint as used

            const hint = getHint();
            if (hint) {
                messageEl.textContent = `${hint} (You lost 1 life. Lives left: ${lives})`;
            } else {
                messageEl.textContent = `No specific hint available for this word. (You lost 1 life. Lives left: ${lives})`;
            }
            messageEl.classList.remove('text-green-500');
            messageEl.classList.add('text-red-500'); // Show hint message in red as it costs a life

            // Check if hint usage led to game over
            if (lives === 0) {
                gameOver = true;
            }
            updateGameDisplay();
        });

        newGameButtonEl.addEventListener('click', initializeGame);

        // Initialize the game when the page loads
        window.onload = initializeGame;
    </script>
</body>
</html>
